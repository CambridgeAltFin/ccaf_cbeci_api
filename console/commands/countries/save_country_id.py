
import click
import psycopg2
import json

from config import config


countries = '[{"code":"IM","id":1},{"code":"MC","id":2},{"code":"MP","id":3},{"code":"PW","id":4},{"code":"SM","id":5},{"code":"SX","id":6},{"code":"MF","id":7},{"code":"TV","id":8},{"code":"TL","id":9},{"code":"CC","id":10},{"code":"KY","id":11},{"code":"HR","id":12},{"code":"CD","id":13},{"code":"AM","id":14},{"code":"CU","id":15},{"code":"CY","id":16},{"code":"BF","id":17},{"code":"CI","id":18},{"code":"UC","id":19},{"code":"CZ","id":20},{"code":"AS","id":21},{"code":"AD","id":22},{"code":"AF","id":23},{"code":"AL","id":24},{"code":"MU","id":25},{"code":"DZ","id":26},{"code":"AR","id":27},{"code":"LV","id":28},{"code":"AZ","id":29},{"code":"PG","id":30},{"code":"AG","id":31},{"code":"BE","id":32},{"code":"BT","id":33},{"code":"BR","id":34},{"code":"CA","id":35},{"code":"AW","id":36},{"code":"AU","id":37},{"code":"AO","id":38},{"code":"BB","id":39},{"code":"CV","id":40},{"code":"CM","id":41},{"code":"CO","id":42},{"code":"DJ","id":43},{"code":"ER","id":44},{"code":"GR","id":45},{"code":"GT","id":46},{"code":"FO","id":47},{"code":"FM","id":48},{"code":"EC","id":49},{"code":"EG","id":50},{"code":"ET","id":51},{"code":"FJ","id":52},{"code":"FI","id":53},{"code":"GI","id":54},{"code":"GL","id":55},{"code":"FR","id":56},{"code":"GH","id":57},{"code":"GY","id":58},{"code":"HU","id":59},{"code":"IN","id":60},{"code":"HK","id":61},{"code":"ID","id":62},{"code":"JM","id":63},{"code":"KG","id":64},{"code":"LA","id":65},{"code":"IR","id":66},{"code":"IT","id":67},{"code":"JO","id":68},{"code":"KZ","id":69},{"code":"KE","id":70},{"code":"LY","id":71},{"code":"LU","id":72},{"code":"MY","id":73},{"code":"MV","id":74},{"code":"ML","id":75},{"code":"MT","id":76},{"code":"MR","id":77},{"code":"MX","id":78},{"code":"NP","id":79},{"code":"NL","id":80},{"code":"NR","id":81},{"code":"NC","id":82},{"code":"NZ","id":83},{"code":"NO","id":84},{"code":"PK","id":85},{"code":"PE","id":86},{"code":"CG","id":87},{"code":"PL","id":88},{"code":"QA","id":89},{"code":"RO","id":90},{"code":"MD","id":91},{"code":"MZ","id":92},{"code":"VC","id":93},{"code":"RW","id":94},{"code":"WS","id":95},{"code":"SA","id":96},{"code":"SO","id":97},{"code":"SL","id":98},{"code":"SI","id":99},{"code":"TW","id":100},{"code":"TH","id":101},{"code":"SY","id":102},{"code":"TZ","id":103},{"code":"UZ","id":104},{"code":"MK","id":105},{"code":"AT","id":106},{"code":"UG","id":107},{"code":"VE","id":108},{"code":"BH","id":109},{"code":"BTC","id":110},{"code":"BD","id":111},{"code":"BZ","id":112},{"code":"BM","id":113},{"code":"BW","id":114},{"code":"BY","id":115},{"code":"BN","id":116},{"code":"BJ","id":117},{"code":"BO","id":118},{"code":"BA","id":119},{"code":"BS","id":120},{"code":"BG","id":121},{"code":"UY","id":122},{"code":"US","id":123},{"code":"DM","id":124},{"code":"KH","id":125},{"code":"CF","id":126},{"code":"TD","id":127},{"code":"KM","id":128},{"code":"CN","id":129},{"code":"GQ","id":130},{"code":"GA","id":131},{"code":"GM","id":132},{"code":"GD","id":133},{"code":"GW","id":134},{"code":"HT","id":135},{"code":"HN","id":136},{"code":"KW","id":137},{"code":"DO","id":138},{"code":"SV","id":139},{"code":"EE","id":140},{"code":"SZ","id":141},{"code":"PF","id":142},{"code":"GE","id":143},{"code":"DE","id":144},{"code":"GU","id":145},{"code":"GN","id":146},{"code":"IS","id":147},{"code":"IQ","id":148},{"code":"IE","id":149},{"code":"IL","id":150},{"code":"JP","id":151},{"code":"KI","id":152},{"code":"KP","id":153},{"code":"KR","id":154},{"code":"BI","id":155},{"code":"DK","id":156},{"code":"CL","id":157},{"code":"CR","id":158},{"code":"MW","id":159},{"code":"LR","id":160},{"code":"LI","id":161},{"code":"MO","id":162},{"code":"MH","id":163},{"code":"MN","id":164},{"code":"ME","id":165},{"code":"NA","id":166},{"code":"NI","id":167},{"code":"NE","id":168},{"code":"PA","id":169},{"code":"MA","id":170},{"code":"ST","id":171},{"code":"SC","id":172},{"code":"SS","id":173},{"code":"MM","id":174},{"code":"NG","id":175},{"code":"OM","id":176},{"code":"PY","id":177},{"code":"PH","id":178},{"code":"PT","id":179},{"code":"PR","id":180},{"code":"RU","id":181},{"code":"SN","id":182},{"code":"RS","id":183},{"code":"SG","id":184},{"code":"SK","id":185},{"code":"SB","id":186},{"code":"ZA","id":187},{"code":"ES","id":188},{"code":"LK","id":189},{"code":"LB","id":190},{"code":"LS","id":191},{"code":"LT","id":192},{"code":"MG","id":193},{"code":"KN","id":194},{"code":"TG","id":195},{"code":"TO","id":196},{"code":"TT","id":197},{"code":"TM","id":198},{"code":"TC","id":199},{"code":"VI","id":200},{"code":"YM","id":201},{"code":"ZW","id":202},{"code":"PS","id":203},{"code":"SD","id":204},{"code":"SR","id":205},{"code":"TR","id":206},{"code":"UA","id":207},{"code":"SE","id":208},{"code":"ZM","id":209},{"code":"TN","id":210},{"code":"AE","id":211},{"code":"GB","id":212},{"code":"VU","id":213},{"code":"VN","id":214},{"code":"BV","id":215},{"code":"KV","id":216},{"code":"LC","id":217},{"code":"CH","id":218},{"code":"TJ","id":219}]'


@click.command(name='countries:save:country-id')
def handle():
    with psycopg2.connect(**config['custom_data']) as connection:
        cursor = connection.cursor()
        for country in json.loads(countries):
            cursor.execute(
                'UPDATE countries SET id = %s WHERE code = %s',
                (country['id'], country['code'])
            )
